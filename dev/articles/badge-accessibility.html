<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="usethis">
<title>Exploring badge accessibility • usethis</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Source%20Sans%20Pro-0.4.0/font.css" rel="stylesheet">
<link href="../deps/_Source%20Code%20Pro-0.4.0/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Exploring badge accessibility">
<meta property="og:description" content="usethis">
<meta property="og:image" content="https://usethis.r-lib.org/logo.png">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="usethis.tidyverse.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">usethis</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.1.5.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/usethis-setup.html">Setup</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/badge-accessibility.html">Exploring badge accessibility</a>
    <a class="dropdown-item" href="../articles/git-credentials.html">Managing Git(Hub) Credentials</a>
    <a class="dropdown-item" href="../articles/pr-functions.html">Pull request helpers</a>
    <a class="dropdown-item" href="../articles/usethis-setup.html">usethis setup</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-news">News</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-news">
    <h6 class="dropdown-header" data-toc-skip>Releases</h6>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/10/renaming-default-branch/">Renaming the default branch (usethis &gt;= 2.1.2)</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/12/usethis-2-0-0/">usethis 2.0.0</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/04/usethis-1-6-0/">usethis 1.6.0</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2019/04/usethis-1.5.0/">usethis 1.5.0 (and 1.4.0)</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2018/02/usethis-1-3-0/">usethis 1.3.0</a>
    <a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2017/11/usethis-1.0.0/">usethis 1.0.0 (and 1.1.0)</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../news/index.html">Changelog</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-lib/usethis/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">
<script src="badge-accessibility_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Exploring badge accessibility</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/usethis/blob/HEAD/vignettes/articles/badge-accessibility.Rmd" class="external-link"><code>vignettes/articles/badge-accessibility.Rmd</code></a></small>
      <div class="d-none name"><code>badge-accessibility.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org">usethis</a></span><span class="op">)</span></code></pre></div>
<p>Various functions in usethis insert a badge into a package’s README file. A badge consists of an image with information about the package, which is usually hyperlinked to a location with further details. Here is a typical badge:</p>
<!-- badges: start -->
<p><a href="https://shields.io/" class="external-link"><img src="https://img.shields.io/badge/badge%20label-badge%20message-yellowgreen" alt="badge_example"></a> <!-- badges: end --></p>
<p>For example, the badge message might be “passing” or “failing”, reflecting the <code>R CMD check</code> status of its current development state, and then link to the actual log file. Or the badge could display the current test coverage, as a percentage of lines, and then link to a site where one can explore test coverage line-by-line.</p>
<!-- badges: start -->
<p><a href="https://github.com/r-lib/usethis/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/r-lib/usethis/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a> <a href="https://app.codecov.io/gh/r-lib/usethis?branch=main" class="external-link"><img src="https://codecov.io/gh/r-lib/usethis/branch/main/graph/badge.svg" alt="Codecov test coverage"></a> <!-- badges: end --></p>
<p>A key point is that the badge often presents <em>dynamic</em> information.</p>
<p>We’d like to improve the user experience for those consuming the README using assistive technology, such as a screen reader.</p>
<p>There are at least two ways that usethis can influence this:</p>
<ul>
<li>The construction of the hyperlinked badge. For example, we control the alt text.</li>
<li>The image itself. We can encourage the badge providers to build accessibility into their badge SVGs. If the “native” badge is not accessible, usethis can substitute an accessible badge from a 3rd party, such as <a href="https://shields.io/" class="external-link">shields.io</a>.</li>
</ul>
<p>This article is meant to gather badge facts in one place and facilitate a dialogue with those using assistive technology.</p>
<div class="section level2">
<h2 id="markdown-image-link">Markdown image link<a class="anchor" aria-label="anchor" href="#markdown-image-link"></a>
</h2>
<p>usethis currently inserts badges in a special “badge block” in the README, fenced with HTML comment tags. Within the badge block, each badge is a hyperlinked image, with alt text. Here is the basic form:</p>
<pre><code>[![alt_text](http://path/to/the/badge/image)](http://path/to/more/details)</code></pre>
<p>Note that the <code>alt_text</code> should be a static label explaining the badge’s purpose, whereas the dynamic information is baked into the externally-served image.</p>
<p>usethis definitely controls this <code>alt_text</code>, so that is something I’d like feedback on.</p>
</div>
<div class="section level2">
<h2 id="badge-image">Badge image<a class="anchor" aria-label="anchor" href="#badge-image"></a>
</h2>
<p>Most badges these days tend to be SVG files, which is fortunate, since SVGs can carry attributes to support accessibility. We demonstrate this with a custom badge generated via the <a href="https://shields.io/" class="external-link">shields.io</a> web service.</p>
<p>I will request a badge with this URL:</p>
<pre><code>https://img.shields.io/badge/my__label-my__message-orange</code></pre>
<p>Here it is as a badge, with the hyperlink set to <a href="https://shields.io/" class="external-link uri">https://shields.io/</a>. The badge is inside an HTML comment block, like usethis does for README badges. I’ve prefixed every field I can influence with “my”; there are 3 such fields:</p>
<ol style="list-style-type: decimal">
<li>The alt text.</li>
<li>The label. This static text appears on the left side of the badge, on a grey background, and describes the badge.</li>
<li>The message. This text appears on the right side of the badge, on a colored background. This is often the dynamic part, where both the color and the text convey a dynamic fact, e.g. “passing” on a green background or “failing” on a red background.</li>
</ol>
<!-- badges: start --><p><a href="https://shields.io/" class="external-link"><img src="https://img.shields.io/badge/my__label-my__message-orange" alt="my_alt_text"></a> <!-- badges: end --></p>
<p>Now we inspect the badge SVG. I apologize in advance for the amount of data displayed here, but it seems good to show one badge in full gory detail. Later, we will display badge information very selectively.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://xml2.r-lib.org/" class="external-link">xml2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://purrr.tidyverse.org" class="external-link">purrr</a></span><span class="op">)</span>

<span class="va">inspect_badge</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">badge</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">badge</span> <span class="op"><a href="https://purrr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html" class="external-link">read_xml</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://purrr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="http://xml2.r-lib.org/reference/as_list.html" class="external-link">as_list</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://purrr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">pluck</a></span><span class="op">(</span><span class="st">"svg"</span><span class="op">)</span>
<span class="op">}</span>

<span class="fu">inspect_badge</span><span class="op">(</span><span class="st">"https://img.shields.io/badge/my__label-my__message-orange"</span><span class="op">)</span>
<span class="co">#&gt; $title</span>
<span class="co">#&gt; $title[[1]]</span>
<span class="co">#&gt; [1] "my_label: my_message"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $linearGradient</span>
<span class="co">#&gt; $linearGradient$stop</span>
<span class="co">#&gt; list()</span>
<span class="co">#&gt; attr(,"offset")</span>
<span class="co">#&gt; [1] "0"</span>
<span class="co">#&gt; attr(,"stop-color")</span>
<span class="co">#&gt; [1] "#bbb"</span>
<span class="co">#&gt; attr(,"stop-opacity")</span>
<span class="co">#&gt; [1] ".1"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $linearGradient$stop</span>
<span class="co">#&gt; list()</span>
<span class="co">#&gt; attr(,"offset")</span>
<span class="co">#&gt; [1] "1"</span>
<span class="co">#&gt; attr(,"stop-opacity")</span>
<span class="co">#&gt; [1] ".1"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"id")</span>
<span class="co">#&gt; [1] "s"</span>
<span class="co">#&gt; attr(,"x2")</span>
<span class="co">#&gt; [1] "0"</span>
<span class="co">#&gt; attr(,"y2")</span>
<span class="co">#&gt; [1] "100%"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $clipPath</span>
<span class="co">#&gt; $clipPath$rect</span>
<span class="co">#&gt; list()</span>
<span class="co">#&gt; attr(,"width")</span>
<span class="co">#&gt; [1] "144"</span>
<span class="co">#&gt; attr(,"height")</span>
<span class="co">#&gt; [1] "20"</span>
<span class="co">#&gt; attr(,"rx")</span>
<span class="co">#&gt; [1] "3"</span>
<span class="co">#&gt; attr(,"fill")</span>
<span class="co">#&gt; [1] "#fff"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"id")</span>
<span class="co">#&gt; [1] "r"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $g</span>
<span class="co">#&gt; $g$rect</span>
<span class="co">#&gt; list()</span>
<span class="co">#&gt; attr(,"width")</span>
<span class="co">#&gt; [1] "61"</span>
<span class="co">#&gt; attr(,"height")</span>
<span class="co">#&gt; [1] "20"</span>
<span class="co">#&gt; attr(,"fill")</span>
<span class="co">#&gt; [1] "#555"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $g$rect</span>
<span class="co">#&gt; list()</span>
<span class="co">#&gt; attr(,"x")</span>
<span class="co">#&gt; [1] "61"</span>
<span class="co">#&gt; attr(,"width")</span>
<span class="co">#&gt; [1] "83"</span>
<span class="co">#&gt; attr(,"height")</span>
<span class="co">#&gt; [1] "20"</span>
<span class="co">#&gt; attr(,"fill")</span>
<span class="co">#&gt; [1] "#fe7d37"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $g$rect</span>
<span class="co">#&gt; list()</span>
<span class="co">#&gt; attr(,"width")</span>
<span class="co">#&gt; [1] "144"</span>
<span class="co">#&gt; attr(,"height")</span>
<span class="co">#&gt; [1] "20"</span>
<span class="co">#&gt; attr(,"fill")</span>
<span class="co">#&gt; [1] "url(#s)"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"clip-path")</span>
<span class="co">#&gt; [1] "url(#r)"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $g</span>
<span class="co">#&gt; $g$text</span>
<span class="co">#&gt; $g$text[[1]]</span>
<span class="co">#&gt; [1] "my_label"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"aria-hidden")</span>
<span class="co">#&gt; [1] "true"</span>
<span class="co">#&gt; attr(,"x")</span>
<span class="co">#&gt; [1] "315"</span>
<span class="co">#&gt; attr(,"y")</span>
<span class="co">#&gt; [1] "150"</span>
<span class="co">#&gt; attr(,"fill")</span>
<span class="co">#&gt; [1] "#010101"</span>
<span class="co">#&gt; attr(,"fill-opacity")</span>
<span class="co">#&gt; [1] ".3"</span>
<span class="co">#&gt; attr(,"transform")</span>
<span class="co">#&gt; [1] "scale(.1)"</span>
<span class="co">#&gt; attr(,"textLength")</span>
<span class="co">#&gt; [1] "510"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $g$text</span>
<span class="co">#&gt; $g$text[[1]]</span>
<span class="co">#&gt; [1] "my_label"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"x")</span>
<span class="co">#&gt; [1] "315"</span>
<span class="co">#&gt; attr(,"y")</span>
<span class="co">#&gt; [1] "140"</span>
<span class="co">#&gt; attr(,"transform")</span>
<span class="co">#&gt; [1] "scale(.1)"</span>
<span class="co">#&gt; attr(,"fill")</span>
<span class="co">#&gt; [1] "#fff"</span>
<span class="co">#&gt; attr(,"textLength")</span>
<span class="co">#&gt; [1] "510"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $g$text</span>
<span class="co">#&gt; $g$text[[1]]</span>
<span class="co">#&gt; [1] "my_message"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"aria-hidden")</span>
<span class="co">#&gt; [1] "true"</span>
<span class="co">#&gt; attr(,"x")</span>
<span class="co">#&gt; [1] "1015"</span>
<span class="co">#&gt; attr(,"y")</span>
<span class="co">#&gt; [1] "150"</span>
<span class="co">#&gt; attr(,"fill")</span>
<span class="co">#&gt; [1] "#010101"</span>
<span class="co">#&gt; attr(,"fill-opacity")</span>
<span class="co">#&gt; [1] ".3"</span>
<span class="co">#&gt; attr(,"transform")</span>
<span class="co">#&gt; [1] "scale(.1)"</span>
<span class="co">#&gt; attr(,"textLength")</span>
<span class="co">#&gt; [1] "730"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $g$text</span>
<span class="co">#&gt; $g$text[[1]]</span>
<span class="co">#&gt; [1] "my_message"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"x")</span>
<span class="co">#&gt; [1] "1015"</span>
<span class="co">#&gt; attr(,"y")</span>
<span class="co">#&gt; [1] "140"</span>
<span class="co">#&gt; attr(,"transform")</span>
<span class="co">#&gt; [1] "scale(.1)"</span>
<span class="co">#&gt; attr(,"fill")</span>
<span class="co">#&gt; [1] "#fff"</span>
<span class="co">#&gt; attr(,"textLength")</span>
<span class="co">#&gt; [1] "730"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"fill")</span>
<span class="co">#&gt; [1] "#fff"</span>
<span class="co">#&gt; attr(,"text-anchor")</span>
<span class="co">#&gt; [1] "middle"</span>
<span class="co">#&gt; attr(,"font-family")</span>
<span class="co">#&gt; [1] "Verdana,Geneva,DejaVu Sans,sans-serif"</span>
<span class="co">#&gt; attr(,"text-rendering")</span>
<span class="co">#&gt; [1] "geometricPrecision"</span>
<span class="co">#&gt; attr(,"font-size")</span>
<span class="co">#&gt; [1] "110"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"width")</span>
<span class="co">#&gt; [1] "144"</span>
<span class="co">#&gt; attr(,"height")</span>
<span class="co">#&gt; [1] "20"</span>
<span class="co">#&gt; attr(,"role")</span>
<span class="co">#&gt; [1] "img"</span>
<span class="co">#&gt; attr(,"aria-label")</span>
<span class="co">#&gt; [1] "my_label: my_message"</span>
<span class="co">#&gt; attr(,"xmlns")</span>
<span class="co">#&gt; [1] "http://www.w3.org/2000/svg"</span>
<span class="co">#&gt; attr(,"xmlns:xlink")</span>
<span class="co">#&gt; [1] "http://www.w3.org/1999/xlink"</span></code></pre></div>
<p>It is my understanding that the two main pieces of metadata are the <code>title</code> and the <code>aria-label</code> attribute. Here I reveal just those two items from the badge:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">inspect_badge</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">badge</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">badge</span> <span class="op"><a href="https://purrr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html" class="external-link">read_xml</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://purrr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="http://xml2.r-lib.org/reference/as_list.html" class="external-link">as_list</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://purrr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">pluck</a></span><span class="op">(</span><span class="st">"svg"</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
    title <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">pluck</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"title"</span>, <span class="fl">1</span><span class="op">)</span>,
    `aria-label` <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/pluck.html" class="external-link">pluck</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://purrr.tidyverse.org/reference/attr_getter.html" class="external-link">attr_getter</a></span><span class="op">(</span><span class="st">"aria-label"</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span>
<span class="op">}</span>

<span class="fu">inspect_badge</span><span class="op">(</span><span class="st">"https://img.shields.io/badge/my__label-my__message-orange"</span><span class="op">)</span>
<span class="co">#&gt; $title</span>
<span class="co">#&gt; [1] "my_label: my_message"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`aria-label`</span>
<span class="co">#&gt; [1] "my_label: my_message"</span></code></pre></div>
<p>This badge carries the same information in the <code>title</code> and in <code>aria-label</code>, which is “my_label: my_message”. I would be interested to learn more about why the same information is included twice and if that is a good or bad thing for the screen reader experience.</p>
<div class="section level3">
<h3 id="shields-io-badges-are-accessible-today">shields.io badges are accessible today<a class="anchor" aria-label="anchor" href="#shields-io-badges-are-accessible-today"></a>
</h3>
<p>One of the reasons I inspected a shields.io badge is that this may provide a usable alternative for any service whose official badge is not (yet?) screen-reader-friendly.</p>
<p>The custom badge above is completely static. But shields.io also supports custom dynamic badges, when the necessary information (label, message, color) is available from a suitable JSON endpoint. Finally, and most relevant to usethis, shields.io offers pre-configured dynamic badges for the most commonly “badged” services, including GitHub Actions and Codecov.</p>
<p>Here is a shields.io badge for usethis’s <code>R CMD check</code> workflow on GitHub Actions:</p>
<!-- badges: start -->
<p><a href="https://github.com/r-lib/usethis/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://img.shields.io/github/workflow/status/r-lib/usethis/R-CMD-check?label=my_label-R-CMD-check" alt="my_alt_text-R-CMD-check"></a> <!-- badges: end --></p>
<p>Again, I am indicating fields I control with <code>my_alt_text</code> and <code>my_label</code>, so it’s easier to get feedback on what usethis should do.</p>
<p>Here is the <code>title</code> and <code>aria-label</code> of the badge above:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">inspect_badge</span><span class="op">(</span><span class="st">"https://img.shields.io/github/workflow/status/r-lib/usethis/R-CMD-check?label=my_label-R-CMD-check"</span><span class="op">)</span>
<span class="co">#&gt; $title</span>
<span class="co">#&gt; [1] "my_label-R-CMD-check: passing"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`aria-label`</span>
<span class="co">#&gt; [1] "my_label-R-CMD-check: passing"</span></code></pre></div>
<p>Now we will take inventory of the main badges inserted by usethis and where things stand re: accessibility.</p>
</div>
</div>
<div class="section level2">
<h2 id="r-cmd-check-status">
<code>R CMD check</code> status<a class="anchor" aria-label="anchor" href="#r-cmd-check-status"></a>
</h2>
<p>We generally obtain the current <code>R CMD check</code> status from a GitHub Actions workflow.</p>
<p>Here is the official badge provided by GitHub:</p>
<!-- badges: start -->
<p><a href="https://github.com/r-lib/usethis/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/r-lib/usethis/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a> <!-- badges: end --></p>
<p>Here is the <code>title</code> and <code>aria-label</code> of the badge above:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">inspect_badge</span><span class="op">(</span><span class="st">"https://github.com/r-lib/usethis/actions/workflows/R-CMD-check.yaml/badge.svg"</span><span class="op">)</span>
<span class="co">#&gt; $title</span>
<span class="co">#&gt; NULL</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`aria-label`</span>
<span class="co">#&gt; NULL</span></code></pre></div>
<p>At the time of writing (late December 2021), the badge does not include such information.</p>
<p>I have requested this in GitHub’s Actions and Packages Feedback forum and the response from GitHub is encouraging. Hopefully the native badge will gain improved accessibility early in 2022.</p>
<p><a href="https://github.com/github/feedback/discussions/8974" class="external-link uri">https://github.com/github/feedback/discussions/8974</a></p>
<p>In the meantime, one could use a shields.io badge to report <code>R CMD check</code> status, as demonstrated in the previous section. A maintainer could do this as a one-off or, if the GitHub badge upgrade is slow in coming, we could implement it in <code><a href="../reference/github_actions.html">usethis::use_github_actions_badge()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="package-lifecycle">Package lifecycle<a class="anchor" aria-label="anchor" href="#package-lifecycle"></a>
</h2>
<p><code><a href="../reference/badges.html">usethis::use_lifecycle_badge()</a></code> declares the developmental stage of a package, using the framework from <a href="https://lifecycle.r-lib.org/articles/stages.html" class="external-link uri">https://lifecycle.r-lib.org/articles/stages.html</a>. This function already inserts a shields.io badge:</p>
<!-- badges: start -->
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a> <!-- badges: end --></p>
<p>Here is the <code>title</code> and <code>aria-label</code> of the badge above:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">inspect_badge</span><span class="op">(</span><span class="st">"https://img.shields.io/badge/lifecycle-stable-brightgreen.svg"</span><span class="op">)</span>
<span class="co">#&gt; $title</span>
<span class="co">#&gt; [1] "lifecycle: stable"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`aria-label`</span>
<span class="co">#&gt; [1] "lifecycle: stable"</span></code></pre></div>
<p>It’s possible that usethis should be using a badge “owned” by the lifecycle package. I think we don’t do so now, because declaring the lifecycle stage of a whole package does not necessarily imply the need to take a formal dependency on the lifecycle package, which is usually what causes badges to be copied into the <code>man/figures/</code> directory.</p>
<p>Also, the badges shipped by the lifecycle package are <em>not</em> currently accessible, which is another reason not to use them. But I have opened an issue about this (<a href="https://github.com/r-lib/lifecycle/issues/117" class="external-link uri">https://github.com/r-lib/lifecycle/issues/117</a>). This should be a relatively easy fix, since these are static badges. Once done, package maintainers would need to update the SVGs that are stored in <code>man/figures/</code>.</p>
</div>
<div class="section level2">
<h2 id="cran-status">CRAN status<a class="anchor" aria-label="anchor" href="#cran-status"></a>
</h2>
<p><code><a href="../reference/badges.html">usethis::use_cran_badge()</a></code> places a badge that indicates what package version is available on CRAN. This badge is served by METACRAN (<a href="https://www.r-pkg.org" class="external-link uri">https://www.r-pkg.org</a>) and maintainer Gábor Csárdi has already incorporated <code>aria-label</code> into the badges (in <a href="https://github.com/metacran/metacranweb/commit/8287a21e6dc2bc50a2d8a7b5a5a56904ae1d04ff" class="external-link">this commit</a>). All available badges are listed <a href="https://www.r-pkg.org/services" class="external-link">here</a>.</p>
<p>Here’s the badge placed by <code><a href="../reference/badges.html">usethis::use_cran_badge()</a></code>:</p>
<!-- badges: start -->
<p><a href="https://CRAN.R-project.org/package=usethis" class="external-link"><img src="https://www.r-pkg.org/badges/version/usethis" alt="CRAN status"></a> <!-- badges: end --></p>
<p>Here is the <code>title</code> and <code>aria-label</code> of the badge above:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">inspect_badge</span><span class="op">(</span><span class="st">"https://www.r-pkg.org/badges/version/usethis"</span><span class="op">)</span>
<span class="co">#&gt; $title</span>
<span class="co">#&gt; NULL</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`aria-label`</span>
<span class="co">#&gt; [1] "CRAN 2.1.5"</span></code></pre></div>
<p>At the time of writing (late December 2021), <code>aria-label</code> is present, but <code>title</code> is not. I would be interested to know if this is a good situation for those using a screen reader.</p>
</div>
<div class="section level2">
<h2 id="code-coverage">Code coverage<a class="anchor" aria-label="anchor" href="#code-coverage"></a>
</h2>
<p><code>usethis::use_coverage(type = c("codecov", "coveralls", ...)</code> calls the internal helper <code>usethis:::use_codecov_badge()</code> to insert a badge for either the Codecov or Coveralls service.</p>
<p>Here are examples of those two badges (note that usethis does not use Coveralls, so I’m using a different package to demo):</p>
<!-- badges: start -->
<p><a href="https://app.codecov.io/gh/r-lib/usethis?branch=main" class="external-link"><img src="https://codecov.io/gh/r-lib/usethis/branch/main/graph/badge.svg" alt="Codecov test coverage"></a> <a href="https://coveralls.io/github/trinker/sentimentr?branch=master" class="external-link"><img src="https://coveralls.io/repos/github/trinker/sentimentr/badge.svg?branch=master" alt="Coveralls test coverage"></a> <!-- badges: end --></p>
<p>Here are the <code>title</code> and <code>aria-label</code> of those badges::</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">inspect_badge</span><span class="op">(</span><span class="st">"https://codecov.io/gh/r-lib/usethis/branch/main/graph/badge.svg"</span><span class="op">)</span>
<span class="co">#&gt; $title</span>
<span class="co">#&gt; NULL</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`aria-label`</span>
<span class="co">#&gt; NULL</span>

<span class="fu">inspect_badge</span><span class="op">(</span><span class="st">"https://coveralls.io/repos/github/trinker/sentimentr/badge.svg?branch=master"</span><span class="op">)</span>
<span class="co">#&gt; $title</span>
<span class="co">#&gt; NULL</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`aria-label`</span>
<span class="co">#&gt; NULL</span></code></pre></div>
<p>At the time of writing (late December 2021), neither badge offers a <code>title</code> or <code>aria-label</code>.</p>
<p>Here are badges from shields.io for Codecov and Coveralls:</p>
<!-- badges: start -->
<p><a href="https://app.codecov.io/gh/r-lib/usethis?branch=main" class="external-link"><img src="https://img.shields.io/codecov/c/github/r-lib/usethis?label=test%20coverage&amp;logo=codecov" alt="Codecov test coverage"></a> <a href="https://img.shields.io/coveralls/github/trinker/sentimentr?logo=coveralls" class="external-link"><img src="https://coveralls.io/repos/github/trinker/sentimentr/badge.svg?branch=master" alt="Coveralls test coverage"></a> <!-- badges: end --></p>
<p>Here are the <code>title</code> and <code>aria-label</code> of the shields.io badges::</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">inspect_badge</span><span class="op">(</span><span class="st">"https://img.shields.io/codecov/c/github/r-lib/usethis?label=test%20coverage&amp;logo=codecov"</span><span class="op">)</span>
<span class="co">#&gt; $title</span>
<span class="co">#&gt; [1] "test coverage: 46%"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`aria-label`</span>
<span class="co">#&gt; [1] "test coverage: 46%"</span>

<span class="fu">inspect_badge</span><span class="op">(</span><span class="st">"https://img.shields.io/coveralls/github/trinker/sentimentr?logo=coveralls"</span><span class="op">)</span>
<span class="co">#&gt; $title</span>
<span class="co">#&gt; [1] "coverage: 19%"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`aria-label`</span>
<span class="co">#&gt; [1] "coverage: 19%"</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="bioconductor">Bioconductor<a class="anchor" aria-label="anchor" href="#bioconductor"></a>
</h2>
<p>If a package is on Bioconductor, <code><a href="../reference/badges.html">usethis::use_bioc_badge()</a></code> can be used to insert a badge for its Bioconductor build status.</p>
<p>Here is such a badge:</p>
<!-- badges: start -->
<p><a href="https://bioconductor.org/checkResults/release/bioc-LATEST/biocthis" class="external-link"><img src="http://www.bioconductor.org/shields/build/release/bioc/biocthis.svg" alt="BioC status"></a> <!-- badges: end --></p>
<p>Here is the <code>title</code> and <code>aria-label</code> of that badge:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">inspect_badge</span><span class="op">(</span><span class="st">"http://www.bioconductor.org/shields/build/release/bioc/biocthis.svg"</span><span class="op">)</span>
<span class="co">#&gt; $title</span>
<span class="co">#&gt; NULL</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`aria-label`</span>
<span class="co">#&gt; NULL</span></code></pre></div>
<p>At the time of writing (late December 2021), the badge does not have a <code>title</code> or <code>aria-label</code>.</p>
<p>It’s not immediately clear how to resolve this, but I suspect that Bioconductor would be receptive to a request to create more accessible badges.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="http://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, Malcolm Barrett, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" width="72"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

  </div></footer>
</body>
</html>
