<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Helpers for GitHub pull requests — pull-requests • usethis</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Helpers for GitHub pull requests — pull-requests"><meta name="description" content="The pr_* family of functions is designed to make working with GitHub pull
requests (PRs) as painless as possible for both contributors and package
maintainers.
To use the pr_* functions, your project must be a Git repo and have one of
these GitHub remote configurations:
&quot;ours&quot;: You can push to the GitHub remote configured as origin and it's
not a fork.
&quot;fork&quot;: You can push to the GitHub remote configured as origin, it's a
fork, and its parent is configured as upstream. origin points to your
personal copy and upstream points to the source repo.


&quot;Ours&quot; and &quot;fork&quot; are two of several GitHub remote configurations examined in
Common remote setups
in Happy Git and GitHub for the useR.
The Pull Request Helpers
article walks through the process of making a pull request with the pr_*
functions.
The pr_* functions also use your Git/GitHub credentials to carry out
various remote operations; see below for more about auth. The pr_*
functions also proactively check for agreement re: the default branch in your
local repo and the source repo. See git_default_branch() for more."><meta property="og:description" content="The pr_* family of functions is designed to make working with GitHub pull
requests (PRs) as painless as possible for both contributors and package
maintainers.
To use the pr_* functions, your project must be a Git repo and have one of
these GitHub remote configurations:
&quot;ours&quot;: You can push to the GitHub remote configured as origin and it's
not a fork.
&quot;fork&quot;: You can push to the GitHub remote configured as origin, it's a
fork, and its parent is configured as upstream. origin points to your
personal copy and upstream points to the source repo.


&quot;Ours&quot; and &quot;fork&quot; are two of several GitHub remote configurations examined in
Common remote setups
in Happy Git and GitHub for the useR.
The Pull Request Helpers
article walks through the process of making a pull request with the pr_*
functions.
The pr_* functions also use your Git/GitHub credentials to carry out
various remote operations; see below for more about auth. The pr_*
functions also proactively check for agreement re: the default branch in your
local repo and the source repo. See git_default_branch() for more."><meta property="og:image" content="https://usethis.r-lib.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="usethis.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">usethis</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">3.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/usethis-setup.html">Setup</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/usethis-setup.html">usethis setup</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Git and GitHub</h6></li>
    <li><a class="dropdown-item" href="../articles/git-credentials.html">Managing Git(Hub) Credentials</a></li>
    <li><a class="dropdown-item" href="../articles/pr-functions.html">Pull request helpers</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/10/renaming-default-branch/">Renaming the default branch (usethis &gt;= 2.1.2)</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/12/usethis-2-0-0/">usethis 2.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/04/usethis-1-6-0/">usethis 1.6.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2019/04/usethis-1.5.0/">usethis 1.5.0 (and 1.4.0)</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2018/02/usethis-1-3-0/">usethis 1.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2017/11/usethis-1.0.0/">usethis 1.0.0 (and 1.1.0)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/usethis/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Helpers for GitHub pull requests</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/usethis/blob/main/R/pr.R" class="external-link"><code>R/pr.R</code></a></small>
      <div class="d-none name"><code>pull-requests.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The <code>pr_*</code> family of functions is designed to make working with GitHub pull
requests (PRs) as painless as possible for both contributors and package
maintainers.</p>
<p>To use the <code>pr_*</code> functions, your project must be a Git repo and have one of
these GitHub remote configurations:</p><ul><li><p>"ours": You can push to the GitHub remote configured as <code>origin</code> and it's
not a fork.</p></li>
<li><p>"fork": You can push to the GitHub remote configured as <code>origin</code>, it's a
fork, and its parent is configured as <code>upstream</code>. <code>origin</code> points to your
<strong>personal</strong> copy and <code>upstream</code> points to the <strong>source repo</strong>.</p></li>
</ul><p>"Ours" and "fork" are two of several GitHub remote configurations examined in
<a href="https://happygitwithr.com/common-remote-setups.html" class="external-link">Common remote setups</a>
in Happy Git and GitHub for the useR.</p>
<p>The <a href="https://usethis.r-lib.org/articles/articles/pr-functions.html">Pull Request Helpers</a>
article walks through the process of making a pull request with the <code>pr_*</code>
functions.</p>
<p>The <code>pr_*</code> functions also use your Git/GitHub credentials to carry out
various remote operations; see below for more about auth. The <code>pr_*</code>
functions also proactively check for agreement re: the default branch in your
local repo and the source repo. See <code><a href="git-default-branch.html">git_default_branch()</a></code> for more.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pr_init</span><span class="op">(</span><span class="va">branch</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">pr_resume</span><span class="op">(</span>branch <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">pr_fetch</span><span class="op">(</span>number <span class="op">=</span> <span class="cn">NULL</span>, target <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"source"</span>, <span class="st">"primary"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">pr_push</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">pr_pull</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">pr_merge_main</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">pr_view</span><span class="op">(</span>number <span class="op">=</span> <span class="cn">NULL</span>, target <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"source"</span>, <span class="st">"primary"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">pr_pause</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">pr_finish</span><span class="op">(</span>number <span class="op">=</span> <span class="cn">NULL</span>, target <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"source"</span>, <span class="st">"primary"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">pr_forget</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-branch">branch<a class="anchor" aria-label="anchor" href="#arg-branch"></a></dt>
<dd><p>Name of a new or existing local branch. If creating a new
branch, note this should usually consist of lower case letters, numbers,
and <code>-</code>.</p></dd>


<dt id="arg-number">number<a class="anchor" aria-label="anchor" href="#arg-number"></a></dt>
<dd><p>Number of PR.</p></dd>


<dt id="arg-target">target<a class="anchor" aria-label="anchor" href="#arg-target"></a></dt>
<dd><p>Which repo to target? This is only a question in the case of a
fork. In a fork, there is some slim chance that you want to consider pull
requests against your fork (the primary repo, i.e. <code>origin</code>) instead of
those against the source repo (i.e. <code>upstream</code>, which is the default).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="git-github-authentication">Git/GitHub Authentication<a class="anchor" aria-label="anchor" href="#git-github-authentication"></a></h2>


<p>Many usethis functions, including those documented here, potentially interact
with GitHub in two different ways:</p><ul><li><p>Via the GitHub REST API. Examples: create a repo, a fork, or a pull
request.</p></li>
<li><p>As a conventional Git remote. Examples: clone, fetch, or push.</p></li>
</ul><p>Therefore two types of auth can happen and your credentials must be
discoverable. Which credentials do we mean?</p><ul><li><p>A GitHub personal access token (PAT) must be discoverable by the gh
package, which is used for GitHub operations via the REST API. See
<code><a href="github-token.html">gh_token_help()</a></code> for more about getting and configuring a PAT.</p></li>
<li><p>If you use the HTTPS protocol for Git remotes, your PAT is also used for
Git operations, such as <code>git push</code>. Usethis uses the gert package for this,
so the PAT must be discoverable by gert. Generally gert and gh will
discover and use the same PAT. This ability to "kill two birds with one
stone" is why HTTPS + PAT is our recommended auth strategy for those new
to Git and GitHub and PRs.</p></li>
<li><p>If you use SSH remotes, your SSH keys must also be discoverable, in
addition to your PAT. The public key must be added to your GitHub account.</p></li>
</ul><p>Git/GitHub credential management is covered in a dedicated article:
<a href="https://usethis.r-lib.org/articles/articles/git-credentials.html">Managing Git(Hub) Credentials</a></p>
    </div>
    <div class="section level2">
    <h2 id="for-contributors">For contributors<a class="anchor" aria-label="anchor" href="#for-contributors"></a></h2>


<p>To contribute to a package, first use <code>create_from_github("OWNER/REPO")</code>.
This forks the source repository and checks out a local copy.</p>
<p>Next use <code>pr_init()</code> to create a branch for your PR. It is best practice to
never make commits to the default branch branch of a fork (usually named
<code>main</code> or <code>master</code>), because you do not own it. A pull request should always
come from a feature branch. It will be much easier to pull upstream changes
from the fork parent if you only allow yourself to work in feature branches.
It is also much easier for a maintainer to explore and extend your PR if you
create a feature branch.</p>
<p>Work locally, in your branch, making changes to files, and committing your
work. Once you're ready to create the PR, run <code>pr_push()</code> to push your local
branch to GitHub, and open a webpage that lets you initiate the PR (or draft
PR).</p>
<p>To learn more about the process of making a pull request, read the <a href="https://usethis.r-lib.org/articles/articles/pr-functions.html">Pull Request Helpers</a>
vignette.</p>
<p>If you are lucky, your PR will be perfect, and the maintainer will accept it.
You can then run <code>pr_finish()</code> to delete your PR branch. In most cases,
however, the maintainer will ask you to make some changes. Make the changes,
then run <code>pr_push()</code> to update your PR.</p>
<p>It's also possible that the maintainer will contribute some code to your PR:
to get those changes back onto your computer, run <code>pr_pull()</code>. It can also
happen that other changes have occurred in the package since you first
created your PR. You might need to merge the default branch (usually named
<code>main</code> or <code>master</code>) into your PR branch. Do that by running
<code>pr_merge_main()</code>: this makes sure that your PR is compatible with the
primary repo's main line of development. Both <code>pr_pull()</code> and
<code>pr_merge_main()</code> can result in merge conflicts, so be prepared to resolve
before continuing.</p>
    </div>
    <div class="section level2">
    <h2 id="for-maintainers">For maintainers<a class="anchor" aria-label="anchor" href="#for-maintainers"></a></h2>


<p>To download a PR locally so that you can experiment with it, run
<code>pr_fetch()</code> and select the PR or, if you already know its number, call
<code>pr_fetch(&lt;pr_number&gt;)</code>. If you make changes, run <code>pr_push()</code> to push them
back to GitHub. After you have merged the PR, run <code>pr_finish()</code> to delete the
local branch and remove the remote associated with the contributor's fork.</p>
    </div>
    <div class="section level2">
    <h2 id="overview-of-all-the-functions">Overview of all the functions<a class="anchor" aria-label="anchor" href="#overview-of-all-the-functions"></a></h2>


<ul><li><p><code>pr_init()</code>: As a contributor, start work on a new PR by ensuring that
your local repo is up-to-date, then creating and checking out a new branch.
Nothing is pushed to or created on GitHub until you call <code>pr_push()</code>.</p></li>
<li><p><code>pr_fetch()</code>: As a maintainer, review or contribute changes to an existing
PR by creating a local branch that tracks the remote PR. <code>pr_fetch()</code> does as
little work as possible, so you can also use it to resume work on an PR that
already has a local branch (where it will also ensure your local branch is
up-to-date). If called with no arguments, up to 9 open PRs are offered for
interactive selection.</p></li>
<li><p><code>pr_resume()</code>: Resume work on a PR by switching to an existing local branch
and pulling any changes from its upstream tracking branch, if it has one. If
called with no arguments, up to 9 local branches are offered for interactive
selection, with a preference for branches connected to PRs and for branches
with recent activity.</p></li>
<li><p><code>pr_push()</code>: The first time it's called, a PR branch is pushed to GitHub
and you're taken to a webpage where a new PR (or draft PR) can be created.
This also sets up the local branch to track its remote counterpart.
Subsequent calls to <code>pr_push()</code> make sure the local branch has all the remote
changes and, if so, pushes local changes, thereby updating the PR.</p></li>
<li><p><code>pr_pull()</code>: Pulls changes from the local branch's remote tracking branch.
If a maintainer has extended your PR, this is how you bring those changes
back into your local work.</p></li>
<li><p><code>pr_merge_main()</code>: Pulls changes from the default branch of the source repo
into the current local branch. This can be used when the local branch is the
default branch or when it's a PR branch.</p></li>
<li><p><code>pr_pause()</code>: Makes sure you're up-to-date with any remote changes in the
PR. Then switches back to the default branch and pulls from the source repo.
Use <code>pr_resume()</code> with name of branch or use <code>pr_fetch()</code> to resume using PR
number.</p></li>
<li><p><code>pr_view()</code>: Visits the PR associated with the current branch in the
browser (default) or the specific PR identified by <code>number</code>.
(FYI <code><a href="browse-this.html">browse_github_pulls()</a></code> is a handy way to visit the list of all PRs for
the current project.)</p></li>
<li><p><code>pr_forget()</code>: Does local clean up when the current branch is an actual or
notional PR that you want to abandon. Maybe you initiated it yourself, via
<code>pr_init()</code>, or you used <code>pr_fetch()</code> to explore a PR from GitHub. Only does
<em>local</em> operations: does not update or delete any remote branches, nor does
it close any PRs. Alerts the user to any uncommitted or unpushed work that is
at risk of being lost. If user chooses to proceed, switches back to the
default branch, pulls changes from source repo, and deletes local PR branch.
Any associated Git remote is deleted, if the "forgotten" PR was the only
branch using it.</p></li>
<li><p><code>pr_finish()</code>: Does post-PR clean up, but does NOT actually merge or close
a PR (maintainer should do this in the browser). If <code>number</code> is not given,
infers the PR from the upstream tracking branch of the current branch. If
<code>number</code> is given, it does not matter whether the PR exists locally. If PR
exists locally, alerts the user to uncommitted or unpushed changes, then
switches back to the default branch, pulls changes from source repo, and
deletes local PR branch. If the PR came from an external fork, any associated
Git remote is deleted, provided it's not in use by any other local branches.
If the PR has been merged and user has permission, deletes the remote branch
(this is the only remote operation that <code>pr_finish()</code> potentially does).</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">pr_fetch</span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, Malcolm Barrett, Andy Teucher, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

