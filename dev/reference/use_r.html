<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create or edit R or test files — use_r • usethis</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create or edit R or test files — use_r"><meta name="description" content="This pair of functions makes it easy to create paired R and test files,
using the convention that the tests for R/foofy.R should live
in tests/testthat/test-foofy.R. You can use them to create new files
from scratch by supplying name, or if you use RStudio, you can call
to create (or navigate to) the companion file based on the currently open
file. This also works when a test snapshot file is active, i.e. if you're
looking at tests/testthat/_snaps/foofy.md, use_r() or use_test() take
you to R/foofy.R or tests/testthat/test-foofy.R, respectively."><meta property="og:description" content="This pair of functions makes it easy to create paired R and test files,
using the convention that the tests for R/foofy.R should live
in tests/testthat/test-foofy.R. You can use them to create new files
from scratch by supplying name, or if you use RStudio, you can call
to create (or navigate to) the companion file based on the currently open
file. This also works when a test snapshot file is active, i.e. if you're
looking at tests/testthat/_snaps/foofy.md, use_r() or use_test() take
you to R/foofy.R or tests/testthat/test-foofy.R, respectively."><meta property="og:image" content="https://usethis.r-lib.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="usethis.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">usethis</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">3.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/usethis-setup.html">Setup</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/usethis-setup.html">usethis setup</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Git and GitHub</h6></li>
    <li><a class="dropdown-item" href="../articles/git-credentials.html">Managing Git(Hub) Credentials</a></li>
    <li><a class="dropdown-item" href="../articles/pr-functions.html">Pull request helpers</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2021/10/renaming-default-branch/">Renaming the default branch (usethis &gt;= 2.1.2)</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/12/usethis-2-0-0/">usethis 2.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2020/04/usethis-1-6-0/">usethis 1.6.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2019/04/usethis-1.5.0/">usethis 1.5.0 (and 1.4.0)</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2018/02/usethis-1-3-0/">usethis 1.3.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2017/11/usethis-1.0.0/">usethis 1.0.0 (and 1.1.0)</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/usethis/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create or edit R or test files</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/usethis/blob/main/R/r.R" class="external-link"><code>R/r.R</code></a></small>
      <div class="d-none name"><code>use_r.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This pair of functions makes it easy to create paired R and test files,
using the convention that the tests for <code>R/foofy.R</code> should live
in <code>tests/testthat/test-foofy.R</code>. You can use them to create new files
from scratch by supplying <code>name</code>, or if you use RStudio, you can call
to create (or navigate to) the companion file based on the currently open
file. This also works when a test snapshot file is active, i.e. if you're
looking at <code>tests/testthat/_snaps/foofy.md</code>, <code>use_r()</code> or <code>use_test()</code> take
you to <code>R/foofy.R</code> or <code>tests/testthat/test-foofy.R</code>, respectively.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">use_r</span><span class="op">(</span>name <span class="op">=</span> <span class="cn">NULL</span>, open <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_interactive.html" class="external-link">is_interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">use_test</span><span class="op">(</span>name <span class="op">=</span> <span class="cn">NULL</span>, open <span class="op">=</span> <span class="fu">rlang</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/is_interactive.html" class="external-link">is_interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>Either a string giving a file name (without directory) or
<code>NULL</code> to take the name from the currently open file in RStudio.</p></dd>


<dt id="arg-open">open<a class="anchor" aria-label="anchor" href="#arg-open"></a></dt>
<dd><p>Whether to open the file for interactive editing.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="renaming-files-in-an-existing-package">Renaming files in an existing package<a class="anchor" aria-label="anchor" href="#renaming-files-in-an-existing-package"></a></h2>



<p>Here are some tips on aligning file names across <code>R/</code> and <code>tests/testthat/</code>
in an existing package that did not necessarily follow this convention
before.</p>
<p>This script generates a data frame of <code>R/</code> and test files that can help you
identify missed opportunities for pairing:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(fs)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">bind_rows</span>(</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">"R"</span>,</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>    <span class="at">path =</span> <span class="fu">dir_ls</span>(<span class="st">"R/"</span>, <span class="at">regexp =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.[Rr]$"</span>),</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>    <span class="at">name =</span> <span class="fu">as.character</span>(<span class="fu">path_ext_remove</span>(<span class="fu">path_file</span>(path))),</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>  ),</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">"test"</span>,</span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a>    <span class="at">path =</span> <span class="fu">dir_ls</span>(<span class="st">"tests/testthat/"</span>, <span class="at">regexp =</span> <span class="st">"/test[^/]+</span><span class="sc">\\</span><span class="st">.[Rr]$"</span>),</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a>    <span class="at">name =</span> <span class="fu">as.character</span>(<span class="fu">path_ext_remove</span>(<span class="fu">str_remove</span>(<span class="fu">path_file</span>(path), <span class="st">"^test[-_]"</span>))),</span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a>  )</span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> type, <span class="at">values_from =</span> path) <span class="sc">%&gt;%</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a>  <span class="fu">print</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span></code></pre><p></p></div>
<p>The <code><a href="rename_files.html">rename_files()</a></code> function can also be helpful.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p>The <a href="https://r-pkgs.org/testing-basics.html" class="external-link">testing</a> and
<a href="https://r-pkgs.org/code.html" class="external-link">R code</a> chapters of
<a href="https://r-pkgs.org" class="external-link">R Packages</a>.</p></li>
<li><p><code><a href="use_test_helper.html">use_test_helper()</a></code> to create a testthat helper file.</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># create a new .R file below R/</span></span></span>
<span class="r-in"><span><span class="fu">use_r</span><span class="op">(</span><span class="st">"coolstuff"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if `R/coolstuff.R` is active in a supported IDE, you can now do:</span></span></span>
<span class="r-in"><span><span class="fu">use_test</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if `tests/testthat/test-coolstuff.R` is active in a supported IDE, you can</span></span></span>
<span class="r-in"><span><span class="co"># return to `R/coolstuff.R` with:</span></span></span>
<span class="r-in"><span><span class="fu">use_r</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, Malcolm Barrett, Andy Teucher, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

