<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Managing Git(Hub) Credentials • usethis</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Managing Git(Hub) Credentials">
<meta property="og:description" content="usethis">
<meta property="og:image" content="https://usethis.r-lib.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">usethis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/articles/usethis-setup.html">Setup</a>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/articles/git-credentials.html">Managing Git(Hub) Credentials</a>
    </li>
    <li>
      <a href="../../articles/articles/pr-functions.html">Pull request helpers</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Blog posts</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2020/12/usethis-2-0-0/" class="external-link">usethis 2.0.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2020/04/usethis-1-6-0/" class="external-link">usethis 1.6.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2019/04/usethis-1.5.0/" class="external-link">usethis 1.5.0 (and 1.4.0)</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2018/02/usethis-1-3-0/" class="external-link">usethis 1.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2017/11/usethis-1.0.0/" class="external-link">usethis 1.0.0 (and 1.1.0)</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/r-lib/usethis/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="git-credentials_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Managing Git(Hub) Credentials</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/usethis/blob/master/vignettes/articles/git-credentials.Rmd" class="external-link"><code>vignettes/articles/git-credentials.Rmd</code></a></small>
      <div class="hidden name"><code>git-credentials.Rmd</code></div>

    </div>

    
    
<!-- This vignette uses a convention of "one sentence per line" in prose. -->
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usethis.r-lib.org">usethis</a></span><span class="op">)</span></code></pre></div>
<p>usethis can help you with many of the Git and GitHub tasks that arise when managing R projects and packages. Under the hood, two lower-level packages are critical to this:</p>
<ul>
<li>gert, for Git operations, like <code>git init</code>, <code>git commit</code>, and <code>git push</code> (<a href="https://docs.ropensci.org/gert/" class="external-link">docs.ropensci.org/gert</a>)</li>
<li>gh, for GitHub API operations, like creating a repo, forking a repo, and opening a pull request (<a href="https://gh.r-lib.org/" class="external-link">gh.r-lib.org</a>)</li>
</ul>
<p>Both packages need access to credentials in order to act on your behalf:</p>
<ul>
<li>gert interacts with GitHub as a Git server, using either the HTTPS or SSH protocol</li>
<li>gh interacts with GitHub via its REST API</li>
</ul>
<p>This article describes our recommendations for how to set up your Git and GitHub credentials. Our goal is a setup that works well for usethis <strong>and</strong> for other tools you may be using, such as command line Git and Git clients (including, but not limited to, RStudio).</p>
<p><em>This is a good time to check that you have up-to-date versions of the packages we’re talking about here. In particular, you want gh &gt;= v1.2.1, which knows about the new token format GitHub announced and adopted in March 2021.</em></p>
<div id="tldr-use-https-2fa-and-a-github-personal-access-token" class="section level2">
<h2 class="hasAnchor">
<a href="#tldr-use-https-2fa-and-a-github-personal-access-token" class="anchor" aria-hidden="true"></a>TL;DR: Use HTTPS, 2FA, and a GitHub Personal Access Token</h2>
<p>Our main recommendations are:</p>
<ol style="list-style-type: decimal">
<li>Adopt HTTPS as your Git transport protocol</li>
<li>Turn on two-factor authentication for your GitHub account</li>
<li>Use a personal access token (PAT) for all Git remote operations from the command line or from R</li>
<li>Allow tools to store and retrieve your credentials from the Git credential store. If you have previously set your GitHub PAT in <code>.Renviron</code>, stop doing that.</li>
</ol>
<p>Next we provide some context and a rationale for these recommendations. In the following section, we explain how to actually implement this.</p>
<div id="https-vs-ssh" class="section level3">
<h3 class="hasAnchor">
<a href="#https-vs-ssh" class="anchor" aria-hidden="true"></a>HTTPS vs SSH</h3>
<p>Instead of HTTPS, you could use SSH. Many people have valid reasons for preferring SSH and they should carry on. Our recommendation for HTTPS is because it’s easier than SSH for newcomers to set up correctly, especially on Windows. GitHub has also long recommended HTTPS to new users. Finally, using HTTPS with a PAT kills two birds with one stone: this single credential can be used to authenticate to GitHub as a regular Git server and for its REST API. If you authenticate via SSH for “regular” Git work, you still have to set up a PAT for work that uses the REST API.</p>
</div>
<div id="two-factor-authentication-and-your-pat" class="section level3">
<h3 class="hasAnchor">
<a href="#two-factor-authentication-and-your-pat" class="anchor" aria-hidden="true"></a>Two-factor authentication and your PAT</h3>
<p>Turning on two-factor authentication for important online accounts is just a good idea, in general. For example, we make 2FA a hard requirement for all members of the tidyverse and r-lib GitHub organizations. With 2FA activated, GitHub will no longer let you send “username + password” as the credentials for an operation like <code>git push</code><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>. Instead, you must send “username + PAT”<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>. By turning on 2FA and using a PAT, you’re following better security practices and future-proofing your workflow.</p>
</div>
<div id="git-credential-helpers" class="section level3">
<h3 class="hasAnchor">
<a href="#git-credential-helpers" class="anchor" aria-hidden="true"></a>Git credential helpers</h3>
<p>It’s awkward to provide your credentials for every single Git transaction, so it’s customary to let your system remember your credentials. Git uses so-called credential helpers for this and, happily, they tend to “just work” these days (especially, on macOS and Windows) <a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>. Git credential helpers take advantage of official OS-provided credential stores, where possible, such as macOS Keychain and Windows Credential Manager.</p>
<p>Recent innovations in gert and gh mean that Git/GitHub operations from R can also store and discover credentials using these same official Git credential helpers. This means we can stop storing GitHub PATs in plain text in a startup file, like <code>.Renviron</code> <a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>. This, in turn, reduces the risk of accidentally leaking your credentials.</p>
</div>
</div>
<div id="practical-instructions" class="section level2">
<h2 class="hasAnchor">
<a href="#practical-instructions" class="anchor" aria-hidden="true"></a>Practical instructions</h2>
<p>How do you actually implement these recommendations? Many functions in usethis recommend calling <code><a href="../../reference/github-token.html">usethis::gh_token_help()</a></code>, which displays similar advice and links here.</p>
<div id="adopt-https" class="section level3">
<h3 class="hasAnchor">
<a href="#adopt-https" class="anchor" aria-hidden="true"></a>Adopt HTTPS</h3>
<p>Make sure to use HTTPS URLs, not SSH, when cloning repos or adding new remotes:</p>
<ul>
<li>HTTPS URLs look like this: <code>https://github.com/&lt;OWNER&gt;/&lt;REPO&gt;.git</code>
</li>
<li>SSH URLs look like this: <code>git@github.com:&lt;OWNER&gt;/&lt;REPO&gt;.git</code>
</li>
</ul>
<p>usethis defaults to HTTPS in functions like <code><a href="../../reference/create_from_github.html">create_from_github()</a></code> and <code><a href="../../reference/use_github.html">use_github()</a></code>, as of v2.0.0<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>.</p>
<p>It’s fine to adopt HTTPS for new work, even if some of your pre-existing repos use SSH.<br>
It’s fine to use HTTPS for one remote in a repo and SSH for another.<br>
It’s fine to use HTTPS remotes for one repo and SSH remotes for another.<br>
It’s fine to interact with a GitHub repo via HTTPS from one computer and via SSH from another.<br>
This is not an all-or-nothing or irreversible decision.<br>
As long as the relevant tools can obtain the necessary credentials from a cache or you, you are good to go.</p>
</div>
<div id="turn-on-two-factor-authentication" class="section level3">
<h3 class="hasAnchor">
<a href="#turn-on-two-factor-authentication" class="anchor" aria-hidden="true"></a>Turn on two-factor authentication</h3>
<p>See GitHub’s most current instructions here:</p>
<p><a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/securing-your-account-with-two-factor-authentication-2fa" class="external-link">Securing your account with two-factor authentication (2FA)</a></p>
<p>If you don’t already use a password manager such as 1Password or LastPass, this is a great time to start! Among other benefits, these apps can serve as an authenticator for 2FA.</p>
<p>Turning on 2FA is recommended but optional.<br>
You <em>can</em> still get and use a PAT, even if you have not turned 2FA on.<br>
The difference is that, once you’ve activated 2FA, you absolutely <em>must</em> use a PAT as your HTTPS credential.</p>
</div>
<div id="get-a-personal-access-token-pat" class="section level3">
<h3 class="hasAnchor">
<a href="#get-a-personal-access-token-pat" class="anchor" aria-hidden="true"></a>Get a personal access token (PAT)</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="../../reference/github-token.html">create_github_token</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Assuming you’re signed into GitHub, <code><a href="../../reference/github-token.html">create_github_token()</a></code> takes you to a pre-filled form to create a new PAT. You can get to the same page in the browser by clicking on “Generate new token” from <a href="https://github.com/settings/tokens" class="external-link uri">https://github.com/settings/tokens</a>. The advantage of <code><a href="../../reference/github-token.html">create_github_token()</a></code> is that we have pre-selected some recommended scopes, which you can look over and adjust before clicking “Generate token”.</p>
<p>It is a very good idea to give the token a descriptive name, because one day you might have multiple PATs, e.g., one that’s configured on your main work computer and another that you use from a secondary computer or VM. Eventually, you’ll need to “spring clean” your PATs and this is much less nerve-wracking if you know which PAT is being used where and for what.</p>
<p>You must <strong>store this token somewhere</strong>, because you’ll never be able to see it again, once you leave this browser window. If you somehow goof this up, just generate a new PAT and, so you don’t confuse yourself, delete the lost token.</p>
<p>In the moment, we usually copy the PAT to the clipboard, anticipating what we’ll do next: trigger a prompt that lets us store the PAT in the Git credential store. If you use a password management app, such as 1Password or LastPass (highly recommended!), this is a great time to add your PAT to the entry for GitHub. Storing your PAT in the Git credential store is a semi-persistent convenience, sort of like a browser cache or “remember me” on a website, but it’s quite possible you will need to re-enter your PAT in the future.</p>
<p>At this point, we assume you’ve created a PAT and have it available on your clipboard.</p>
</div>
<div id="put-your-pat-into-the-git-credential-store" class="section level3">
<h3 class="hasAnchor">
<a href="#put-your-pat-into-the-git-credential-store" class="anchor" aria-hidden="true"></a>Put your PAT into the Git credential store</h3>
<p><em>If you have previously made your GitHub PAT available by setting the <code>GITHUB_PAT</code> environment variable in <code>.Renviron</code>, you need to actively stop doing that.</em><a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<p>How to insert your PAT in the Git credential store?</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">gitcreds</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gitcreds/man/gitcreds_get.html" class="external-link">gitcreds_set</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>You will have the <a href="https://r-lib.github.io/gitcreds/" class="external-link">gitcreds package</a> installed, as of usethis v2.0.0, because usethis uses gh, and gh uses gitcreds. Call <code><a href="https://rdrr.io/pkg/gitcreds/man/gitcreds_get.html" class="external-link">gitcreds::gitcreds_set()</a></code>.</p>
<p>If you don’t have a PAT stored already, it will prompt you to enter your PAT. Paste!</p>
<p>If you do already have a stored credential, <code><a href="https://rdrr.io/pkg/gitcreds/man/gitcreds_get.html" class="external-link">gitcreds::gitcreds_set()</a></code> reveals this and will even let you inspect it. This helps you decide whether to keep the existing credential or replace it. When in doubt, embrace a new, known-to-be-good credential over an old one, of uncertain origins.</p>
<p>Here are two great ways to check that all is well:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">gh</span><span class="fu">::</span><span class="fu"><a href="https://gh.r-lib.org/reference/gh_whoami.html" class="external-link">gh_whoami</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="../../reference/git_sitrep.html">git_sitrep</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Both of these functions reveal whether a GitHub PAT is discovered and provide information about the associated user, the PAT’s scopes, etc.</p>
<p>This step is something you do once. Or, rather, once per machine, per PAT. From this point on, usethis and its dependencies should be able to automatically retrieve and use this PAT.</p>
<p>Sidebar: the gitcreds package plays the same role for gh as the <a href="https://docs.ropensci.org/credentials/" class="external-link">credentials package</a> does for gert. Both gitcreds and credentials provide an R interface to the Git credential store, but are targeting slightly different use cases. The gitcreds and credentials packages are evolving convergently and may, in fact, merge into one. But in the meantime, there is some chance that they use a different “key”, in the “key-value” sense, when storing or retrieving your PAT. Therefore, it is conceivable that gert/credentials may also prompt you once for your PAT, in which case you should just provide it again. To explicitly check if credentials can discover your PAT, call <code><a href="https://docs.ropensci.org/credentials/reference/set_github_pat.html" class="external-link">credentials::set_github_pat()</a></code>. If it cannot, this will lead to a prompt where you can enter it.</p>
</div>
</div>
<div id="additional-resources" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-resources" class="anchor" aria-hidden="true"></a>Additional resources</h2>
<p>Most users should be ready to work with Git and GitHub from R now, specifically with gert, gh, and usethis. In this section, we cover more specialized topics that only apply to certain users.</p>
<div id="github-enterprise" class="section level3">
<h3 class="hasAnchor">
<a href="#github-enterprise" class="anchor" aria-hidden="true"></a>GitHub Enterprise</h3>
<p>As of v2.0.0, usethis should fully support GitHub Enterprise deployments. If you find this is not true, please <a href="https://github.com/r-lib/usethis/issues/new" class="external-link">open an issue</a>.</p>
<p>There are a few usethis functions that support an explicit <code>host</code> argument, but in general, usethis honors the GitHub host implicit in URLs, e.g., the locally configured Git remotes, or inherits the default behaviour of gh. The gh package honors the <code>GITHUB_API_URL</code> environment variable which, when unset, falls back to <code>https://api.github.com</code>.</p>
<p>In general, usethis, gh, and gitcreds should all work with GitHub Enterprise, as long as the intended GitHub host is discoverable or specified. For example, you can store a PAT for a GitHub Enterprise deployment like so:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">gitcreds</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/gitcreds/man/gitcreds_get.html" class="external-link">gitcreds_set</a></span><span class="op">(</span><span class="st">"https://github.acme.com"</span><span class="op">)</span></code></pre></div>
<p>At the time of writing, <code><a href="https://docs.ropensci.org/credentials/reference/set_github_pat.html" class="external-link">credentials::set_github_pat()</a></code> is hard-wired to “github.com”, but this may be generalized in the future.</p>
</div>
<div id="what-about--renviron" class="section level3">
<h3 class="hasAnchor">
<a href="#what-about--renviron" class="anchor" aria-hidden="true"></a>What about <code>.Renviron</code>?</h3>
<p>In the past, the most common way to make a GitHub PAT available in R was to define it as the <code>GITHUB_PAT</code> environment variable in the <code>.Renviron</code> startup file. This still works, since gitcreds+gh and credentials+gert check environment variables before they consult the Git credential store. However, this also means that the presence of a legacy <code>GITHUB_PAT</code> in your <code>.Renviron</code> can get in the way of your adoption of the new approach!<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a></p>
<p>Why do gitcreds+gh and credentials+gert even check environment variables? Once they retrieve a PAT from the store, they temporarily cache it in an environment variable, which persists for the duration of the current R session. This allows a discovered PAT to be reused, potentially by multiple packages, repeatedly over the course of an R session.</p>
<p>Using <code>.Renviron</code> as your primary PAT store is less secure and, if you can, it is safer to keep your PAT in the Git credential store and let packages that need it to discover it there upon first need.</p>
<p>If you still want to use the less secure <code>.Renviron</code> method, <code><a href="../../reference/edit.html">usethis::edit_r_environ()</a></code> opens that file for editing.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="../../reference/edit.html">edit_r_environ</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Add a line like this, <strong>but substitute your PAT</strong>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1"></a><span class="va">GITHUB_PAT=</span>8c70fd8419398999c9ac5bacf3192882193cadf2</span></code></pre></div>
<p>Make sure this file ends in a newline! Lack of a newline can lead to silent failure to load startup files, which can be tricky to debug. Take care that this file is not accidentally pushed to the cloud, e.g. Google Drive or GitHub.</p>
<p>Restart R for changes in <code>.Renviron</code> to take effect.</p>
</div>
<div id="continuous-integration" class="section level3">
<h3 class="hasAnchor">
<a href="#continuous-integration" class="anchor" aria-hidden="true"></a>Continuous integration</h3>
<p>On a headless system, such as on a CI/CD platform like GitHub Actions, you won’t be able to interactively store a PAT with <code><a href="https://rdrr.io/pkg/gitcreds/man/gitcreds_get.html" class="external-link">gitcreds::gitcreds_set()</a></code> or <code><a href="https://docs.ropensci.org/credentials/reference/set_github_pat.html" class="external-link">credentials::set_github_pat()</a></code>. In the case of GitHub Actions, an access token is automatically available to the workflow and can be exposed to R as the <code>GITHUB_PAT</code> environment variable like so:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="at">  </span><span class="fu">GITHUB_PAT</span><span class="kw">:</span><span class="at"> ${{ secrets.GITHUB_TOKEN }}</span></span></code></pre></div>
<p>If this automatic token doesn’t have sufficient permissions, you’ll need to create a suitable token and store it as a repository secret.</p>
<p>This is also the general approach for CI/CD platforms other than GitHub Actions:</p>
<ul>
<li>Provide the PAT as a secure <code>GITHUB_PAT</code> environment variable.</li>
<li>Use regular environment variables to store less sensitive settings, such as the API host.</li>
</ul>
<p>Take care not to expose your PAT by, e.g., printing environment variables to a log file.</p>
</div>
</div>
<div id="how-to-learn-more" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-learn-more" class="anchor" aria-hidden="true"></a>How to learn more</h2>
<p>gh and gitcreds</p>
<ul>
<li>gh: <a href="https://gh.r-lib.org/" class="external-link">gh.r-lib.org</a>
</li>
<li>gh vignette: <a href="https://gh.r-lib.org/articles/managing-personal-access-tokens.html" class="external-link">Managing Personal Access Tokens</a>
</li>
<li>gitcreds: <a href="https://r-lib.github.io/gitcreds/" class="external-link">r-lib.github.io/gitcreds/</a>
</li>
</ul>
<p>gert and credentials</p>
<ul>
<li>gert: <a href="https://docs.ropensci.org/gert/" class="external-link">docs.ropensci.org/gert</a>
</li>
<li>credentials: <a href="https://docs.ropensci.org/credentials/" class="external-link">docs.ropensci.org/credentials</a>
</li>
<li>rOpenSci tech note: <a href="https://ropensci.org/technotes/2020/07/07/github-pat/" class="external-link">A better way to manage your GitHub personal access tokens</a>
</li>
</ul>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Password authentication is being deprecated at GitHub anyway, so you might as well face the music now.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>In fact, when you send a PAT as the password, the email or username doesn’t actually matter, but you might as well send your username.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>If you’re trying to follow the advice in this article and things don’t work the way we say they do, consider that you may need to update Git. Credential helpers are absolutely an area of Git that has improved rapidly in recent years and the gitcreds and credentials package work best with recent versions of Git.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>An even more dangerous practice is to hard-code a PAT in an R script, which is never a good idea.<a href="#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>As always, the <code>usethis.protocol</code> option can be configured to customize your own default.<a href="#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>If you have any doubt about your previous practices, open <code>.Renviron</code>, look for any line setting the <code>GITHUB_PAT</code> environment variable, and delete it. <code><a href="../../reference/edit.html">usethis::edit_r_environ()</a></code> can be helpful for getting <code>.Renviron</code> open for editing. Don’t forget to restart R for this change to take effect.<a href="#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>If you have any doubt about your previous practices, open <code>.Renviron</code>, look for any line setting the <code>GITHUB_PAT</code> environment variable, and delete it. <code><a href="../../reference/edit.html">usethis::edit_r_environ()</a></code> can be helpful for getting <code>.Renviron</code> open for editing. Don’t forget to restart R for this change to take effect.<a href="#fnref7" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="http://hadley.nz" class="external-link external-link">Hadley Wickham</a>, <a href="https://jennybryan.org" class="external-link external-link">Jennifer Bryan</a>, Malcolm Barrett, <a href="https://www.rstudio.com" class="external-link external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'f67d4c46004acc8326e8d95f296a680e',
    indexName: 'usethis',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
