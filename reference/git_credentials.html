<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Produce or register git credentials — git_credentials • usethis</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Produce or register git credentials — git_credentials" />
<meta property="og:description" content="Credentials are needed for git operations like git push that address a
remote, typically GitHub. usethis uses the git2r package. git2r tries to use
the same credentials as command line git, but sometimes fails. usethis tries
to increase the chance that things &quot;just work&quot; and, when they don't, to
provide the user a way to intervene:
git_credentials() returns any credentials that have been registered
with use_git_credentials() and, otherwise, implements usethis's
default strategy.
use_git_credentials() allows you to register credentials explicitly
for use in all usethis functions in an R session. Do this only after
proven failure of the defaults.

" />
<meta property="og:image" content="https://usethis.r-lib.org/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">usethis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/articles/usethis-setup.html">Setup</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/articles/pr-functions.html">Pull request helpers</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Blog posts</li>
    <li>
      <a href="https://www.tidyverse.org/articles/2019/04/usethis-1.5.0/">usethis 1.5.0 (and 1.4.0)</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2018/02/usethis-1-3-0/">usethis 1.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/articles/2017/11/usethis-1.0.0/">usethis 1.0.0 (and 1.1.0)</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/usethis/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Produce or register git credentials</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/usethis/blob/master/R/git.R'><code>R/git.R</code></a></small>
    <div class="hidden name"><code>git_credentials.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Credentials are needed for git operations like <code>git push</code> that address a
remote, typically GitHub. usethis uses the git2r package. git2r tries to use
the same credentials as command line git, but sometimes fails. usethis tries
to increase the chance that things "just work" and, when they don't, to
provide the user a way to intervene:</p><ul>
<li><p><code>git_credentials()</code> returns any <code>credentials</code> that have been registered
with <code>use_git_credentials()</code> and, otherwise, implements usethis's
default strategy.</p></li>
<li><p><code>use_git_credentials()</code> allows you to register <code>credentials</code> explicitly
for use in all usethis functions in an R session. Do this only after
proven failure of the defaults.</p></li>
</ul>

    </div>

    <pre class="usage"><span class='fu'>git_credentials</span>(<span class='kw'>protocol</span> <span class='kw'>=</span> <span class='fu'><a href='git_protocol.html'>git_protocol</a></span>(), <span class='kw'>auth_token</span> <span class='kw'>=</span> <span class='fu'><a href='browse_github_token.html'>github_token</a></span>())

<span class='fu'>use_git_credentials</span>(<span class='no'>credentials</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>protocol</th>
      <td><p>Optional. Should be "ssh" or "https", if specified. Defaults
to the option <code>usethis.protocol</code> and, if unset, to an interactive choice
or, in non-interactive sessions, "ssh". <code>NA</code> triggers the interactive menu.</p></td>
    </tr>
    <tr>
      <th>auth_token</th>
      <td><p>GitHub personal access token (PAT).</p></td>
    </tr>
    <tr>
      <th>credentials</th>
      <td><p>A git2r credential object produced with
<code><a href='https://docs.ropensci.org/git2r/reference/cred_env.html'>git2r::cred_env()</a></code>, <code><a href='https://docs.ropensci.org/git2r/reference/cred_ssh_key.html'>git2r::cred_ssh_key()</a></code>, <code><a href='https://docs.ropensci.org/git2r/reference/cred_token.html'>git2r::cred_token()</a></code>, or
<code><a href='https://docs.ropensci.org/git2r/reference/cred_user_pass.html'>git2r::cred_user_pass()</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Either <code>NULL</code> or a git2r credential object, invisibly, i.e.
something to be passed to git2r as <code>credentials</code>.</p>
    <h2 class="hasAnchor" id="default-credentials"><a class="anchor" href="#default-credentials"></a>Default credentials</h2>

    


<p>If the default behaviour of usethis + git2r works, rejoice and leave well
enough alone. Keep reading if you need more control or understanding.</p>
    <h2 class="hasAnchor" id="ssh-credentials"><a class="anchor" href="#ssh-credentials"></a>SSH credentials</h2>

    


<p>For <code>protocol = "ssh"</code>, by default, usethis passes <code>NULL</code> credentials
to git2r. This will work if you have the exact configuration expected by
git2r:</p><ol>
<li><p>Your public and private keys are in the default locations,
<code>~/.ssh/id_rsa.pub</code> and <code>~/.ssh/id_rsa</code>, respectively.</p></li>
<li><p>All the relevant software agrees on the definition of <code>~/</code>, i.e.
your home directory. This is harder than it sounds on Windows.</p></li>
<li><p>Your <code>ssh-agent</code> is configured to manage your SSH passphrase, if you have
one. This too can be a problem on Windows. Read more about SSH setup in
<a href='https://happygitwithr.com/ssh-keys.html'>Happy Git and GitHub for the useR</a>,
especially the <a href='https://happygitwithr.com/ssh-keys.html#ssh-troubleshooting'>troubleshooting section</a>.</p></li>
</ol>

<p>If the <code>NULL</code> default doesn't work, you can make <code>credentials</code> explicitly
with <code><a href='https://docs.ropensci.org/git2r/reference/cred_ssh_key.html'>git2r::cred_ssh_key()</a></code> and register that with
<code>use_git_credentials()</code> for the rest of the session:</p><pre><span class='no'>my_cred</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='kw pkg'>git2r</span><span class='kw ns'>::</span><span class='fu'><a href='https://docs.ropensci.org/git2r/reference/cred_ssh_key.html'>cred_ssh_key</a></span>(
   <span class='kw'>publickey</span>  <span class='kw'>=</span> <span class='st'>"path/to/your/id_rsa.pub"</span>,
   <span class='kw'>privatekey</span> <span class='kw'>=</span> <span class='st'>"path/to/your/id_rsa"</span>,
   <span class='co'># include / omit passphrase as appropriate to your situation</span>
   <span class='kw'>passphrase</span> <span class='kw'>=</span> <span class='kw pkg'>askpass</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/askpass/man/askpass.html'>askpass</a></span>()
)
<span class='fu'>use_git_credentials</span>(<span class='kw'>credentials</span> <span class='kw'>=</span> <span class='no'>my_cred</span>)</pre>

<p>For the remainder of the session, <code>git_credentials()</code> will return
<code>my_cred</code>.</p>
    <h2 class="hasAnchor" id="https-credentials"><a class="anchor" href="#https-credentials"></a>HTTPS credentials</h2>

    


<p>For <code>protocol = "https"</code>, we must send username and password. It is
possible that your OS has cached this and git2r will successfully use that.
However, usethis can offer even more chance of success in the HTTPS case.
GitHub also accepts a personal access token (PAT) via HTTPS. If
<code>credentials = NULL</code> and a PAT is available, we send it. Preference is
given to any <code>auth_token</code> that is passed explicitly. Otherwise,
<code><a href='browse_github_token.html'>github_token()</a></code> is called. If a PAT is found, we make an HTTPS
credential with <code><a href='https://docs.ropensci.org/git2r/reference/cred_user_pass.html'>git2r::cred_user_pass()</a></code>. The PAT is sent as the password
and dummy text is sent as the username (the PAT is what really matters in
this case). You can also register an explicit credential yourself in a
similar way:</p><pre><span class='no'>my_cred</span> <span class='kw'>&amp;</span><span class='no'>lt</span>;- <span class='kw pkg'>git2r</span><span class='kw ns'>::</span><span class='fu'><a href='https://docs.ropensci.org/git2r/reference/cred_user_pass.html'>cred_user_pass</a></span>(
  <span class='kw'>username</span> <span class='kw'>=</span> <span class='st'>"janedoe"</span>,
  <span class='kw'>password</span> <span class='kw'>=</span> <span class='kw pkg'>askpass</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/askpass/man/askpass.html'>askpass</a></span>()
)
<span class='fu'>use_git_credentials</span>(<span class='kw'>credentials</span> <span class='kw'>=</span> <span class='no'>my_cred</span>)</pre>

<p>For the remainder of the session, <code>git_credentials()</code> will return
<code>my_cred</code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>git_credentials</span>()</div><div class='output co'>#&gt; NULL</div><div class='input'><span class='fu'>git_credentials</span>(<span class='kw'>protocol</span> <span class='kw'>=</span> <span class='st'>"ssh"</span>)</div><div class='output co'>#&gt; NULL</div><div class='input'>
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># these calls look for a GitHub PAT</span>
<span class='fu'>git_credentials</span>(<span class='kw'>protocol</span> <span class='kw'>=</span> <span class='st'>"https"</span>)
<span class='fu'>git_credentials</span>(<span class='kw'>protocol</span> <span class='kw'>=</span> <span class='st'>"https"</span>, <span class='kw'>auth_token</span> <span class='kw'>=</span> <span class='st'>"MY_GITHUB_PAT"</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='http://hadley.nz'>Hadley Wickham</a>, <a href='https://jennybryan.org'>Jennifer Bryan</a>, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.9000.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: 'f67d4c46004acc8326e8d95f296a680e',
    indexName: 'usethis',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


