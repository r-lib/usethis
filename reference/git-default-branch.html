<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get or set the default Git branch — git-default-branch • usethis</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Get or set the default Git branch — git-default-branch"><meta property="og:description" content="The git_default_branch*() functions put some structure around the somewhat
fuzzy (but definitely real) concept of the default branch. In particular,
they support new conventions around the Git default branch name, globally or
in a specific project / Git repository."><meta property="og:image" content="https://usethis.r-lib.org/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">usethis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/articles/usethis-setup.html">Setup</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/articles/git-credentials.html">Managing Git(Hub) Credentials</a>
    </li>
    <li>
      <a href="../articles/articles/pr-functions.html">Pull request helpers</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Blog posts</li>
    <li>
      <a href="https://www.tidyverse.org/blog/2020/12/usethis-2-0-0/">usethis 2.0.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2020/04/usethis-1-6-0/">usethis 1.6.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2019/04/usethis-1.5.0/">usethis 1.5.0 (and 1.4.0)</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2018/02/usethis-1-3-0/">usethis 1.3.0</a>
    </li>
    <li>
      <a href="https://www.tidyverse.org/blog/2017/11/usethis-1.0.0/">usethis 1.0.0 (and 1.1.0)</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/r-lib/usethis/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get or set the default Git branch</h1>
    <small class="dont-index">Source: <a href="https://github.com/r-lib/usethis/blob/master/R/git-default-branch.R"><code>R/git-default-branch.R</code></a></small>
    <div class="hidden name"><code>git-default-branch.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>git_default_branch*()</code> functions put some structure around the somewhat
fuzzy (but definitely real) concept of the default branch. In particular,
they support new conventions around the Git default branch name, globally or
in a specific project / Git repository.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class="sourceCode r"><code><span class="fu">git_default_branch</span><span class="op">(</span><span class="op">)</span>

<span class="fu">git_default_branch_configure</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"main"</span><span class="op">)</span>

<span class="fu">git_default_branch_rediscover</span><span class="op">(</span>current_local_default <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>

<span class="fu">git_default_branch_rename</span><span class="op">(</span>from <span class="op">=</span> <span class="cn">NULL</span>, to <span class="op">=</span> <span class="st">"main"</span><span class="op">)</span></code></pre></div>

    <div id="arguments">
    <h2>Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <table class="ref-arguments"><colgroup><col class="name"><col class="desc"></colgroup><tr><th>name</th>
      <td><p>Default name for the initial branch in new Git repositories.</p></td>
    </tr><tr><th>current_local_default</th>
      <td><p>Name of the local branch that is currently
functioning as the default branch. If unspecified, this can often be
inferred.</p></td>
    </tr><tr><th>from</th>
      <td><p>Name of the branch that is currently functioning as the default
branch.</p></td>
    </tr><tr><th>to</th>
      <td><p>New name for the default branch.</p></td>
    </tr></table></div>

    <div id="value">
    <h2>Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Name of the default branch.</p>
    </div>
    <div id="background-on-the-default-branch">
    <h2>Background on the default branch<a class="anchor" aria-label="anchor" href="#background-on-the-default-branch"></a></h2>
    


<p>Technically, Git has no official concept of the default branch. But in
reality, almost all Git repos have an <em>effective default branch</em>. If there's
only one branch, this is it! It is the branch that most bug fixes and
features get merged in to. It is the branch you see when you first visit a
repo on a site such as GitHub. On a Git remote, it is the branch that <code>HEAD</code>
points to.</p>
<p>Historically, <code>master</code> has been the most common name for the default branch,
but <code>main</code> is an increasingly popular choice.</p>
    </div>
    <div id="git-default-branch-configure-">
    <h2><code>git_default_branch_configure()</code><a class="anchor" aria-label="anchor" href="#git-default-branch-configure-"></a></h2>
    

<p>This configures <code>init.defaultBranch</code> at the global (a.k.a user) level. This
setting determines the name of the branch that gets created when you make the
first commit in a new Git repo. <code>init.defaultBranch</code> only affects the local
Git repos you create in the future.</p>
    </div>
    <div id="git-default-branch">
    <h2><code>git_default_branch</code><a class="anchor" aria-label="anchor" href="#git-default-branch"></a></h2>
    

<p>This figures out the default branch of the current Git repo, integrating
information from the local repo and, if applicable, the <code>upstream</code> or
<code>origin</code> remote. If there is a local vs. remote mismatch,
<code>git_default_branch()</code> throws an error with advice to call
<code>git_default_branch_rediscover()</code> to repair the situation.</p>
<p>For a remote repo, the default branch is the branch that <code>HEAD</code> points to.</p>
<p>For the local repo, if there is only one branch, that must be the default!
Otherwise we try to identify the relevant local branch by looking for
specific branch names, in this order:</p><ul><li><p>whatever the default branch of <code>upstream</code> or <code>origin</code> is, if applicable</p></li>
<li><p><code>main</code></p></li>
<li><p><code>master</code></p></li>
<li><p>the value of the Git option <code>init.defaultBranch</code>, with the usual deal where
a local value, if present, takes precedence over a global (a.k.a.
user-level) value</p></li>
</ul></div>
    <div id="git-default-branch-rediscover-">
    <h2><code>git_default_branch_rediscover()</code><a class="anchor" aria-label="anchor" href="#git-default-branch-rediscover-"></a></h2>
    

<p>This consults an external authority -- specifically, the remote <strong>source
repo</strong> on GitHub -- to learn the default branch of the current project /
repo. If that doesn't match the apparent local default branch (for example,
the project switched from <code>master</code> to <code>main</code>), we do the corresponding branch
renaming in your local repo and, if relevant, in your fork.</p>
<p>See <a href="https://happygitwithr.com/common-remote-setups.html">https://happygitwithr.com/common-remote-setups.html</a> for more about
GitHub remote configurations and, e.g., what we mean by the source repo. This
function works for the configurations <code>"ours"</code>, <code>"fork"</code>, and <code>"theirs"</code>.</p>
    </div>
    <div id="git-default-branch-rename-">
    <h2><code>git_default_branch_rename()</code><a class="anchor" aria-label="anchor" href="#git-default-branch-rename-"></a></h2>
    

<p>Note: this only works for a repo that you effectively own. In terms of
GitHub, you must own the <strong>source repo</strong> personally or, if
organization-owned, you must have <code>admin</code> permission on the <strong>source repo</strong>.</p>
<p>This renames the default branch in the <strong>source repo</strong> on GitHub and then
calls <code>git_default_branch_rediscover()</code>, to make any necessary changes in the
local repo and, if relevant, in your personal fork.</p>
<p>See <a href="https://happygitwithr.com/common-remote-setups.html">https://happygitwithr.com/common-remote-setups.html</a> for more about
GitHub remote configurations and, e.g., what we mean by the source repo. This
function works for the configurations <code>"ours"</code>, <code>"fork"</code>, and <code>"no_github"</code>.</p>
<p>Regarding <code>"no_github"</code>: Of course, this function does what you expect for a
local repo with no GitHub remotes, but that is not the primary use case.</p>
    </div>

    <div id="examples">
    <h2>Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h2>
    <div class="ref-examples sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="fu">git_default_branch</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="fu">git_default_branch_configure</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="fu">git_default_branch_rediscover</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># you can always explicitly specify the local branch that's been playing the</span></span>
<span class="r-in"><span class="co"># role of the default</span></span>
<span class="r-in"><span class="fu">git_default_branch_rediscover</span><span class="op">(</span><span class="st">"unconventional_default_branch_name"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="fu">git_default_branch_rename</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># you can always explicitly specify one or both branch names</span></span>
<span class="r-in"><span class="fu">git_default_branch_rename</span><span class="op">(</span>from <span class="op">=</span> <span class="st">"this"</span>, to <span class="op">=</span> <span class="st">"that"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="http://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://jennybryan.org" class="external-link">Jennifer Bryan</a>, Malcolm Barrett, <a href="https://www.rstudio.com" class="external-link"><img src="https://www.tidyverse.org/rstudio-logo.svg" alt="RStudio" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.9000.9000.9000.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'f67d4c46004acc8326e8d95f296a680e',
    indexName: 'usethis',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

